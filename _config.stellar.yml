######## Stellar info ########
stellar:
  version: '1.33.1'
  homepage: 'https://xaoxuu.com/wiki/stellar/'
  repo: 'https://github.com/xaoxuu/hexo-theme-stellar'
  main_css: /css/main.css
  main_js: /js/main.js

######## Sidebar ########
logo:
  avatar: https://seekblack.oss-cn-chengdu.aliyuncs.com/cat.jpg
  title: '[探索](/)'
  subtitle: '无所事事的记录'

menubar:
  columns: 4
  items: 
    - id: post
      theme: '#1BCDFC'
      icon: solar:documents-bold-duotone
      title: 博客
      url: /
    - id: wiki
      theme: '#FA6400'
      icon: solar:planet-bold-duotone
      title: 探索
      url: /wiki/explore/ 
    - id: social
      theme: '#F44336'
      icon: solar:chat-square-like-bold-duotone
      title: 社交
      url: /friends/

# ✅ [新增] 这里定义了您的打字机小组件
widgets:
  sidebar_intro:
    type: html
    content: |
      <div class="typewriter-container" style="font-family: 'PingFang SC', 'Microsoft YaHei', sans-serif; font-size: 1.1rem; color: #555; padding: 10px 0;">
        <span id="typewriter-text"></span><span class="typing-cursor">|</span>
      </div>
      <style>
        .typing-cursor { display: inline-block; color: #14b8a6; font-weight: bold; margin-left: 2px; animation: blink 1s step-end infinite; }
        @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }
      </style>
      <script>
        (function() {
          const texts = ["无所事事的记录", "生活碎片的存档", "漫无目的的思考", "静谧时光的独白"];
          let step = 0; let idx = 0; let del = false;
          const el = document.getElementById('typewriter-text');
          function type() {
            const txt = texts[step];
            if (del) { el.textContent = txt.substring(0, idx--); }
            else { el.textContent = txt.substring(0, idx++); }
            let spd = del ? 100 : 150;
            if (!del && idx === txt.length + 1) { del = true; spd = 2000; }
            else if (del && idx === -1) { del = false; step = (step + 1) % texts.length; idx = 0; spd = 500; }
            setTimeout(type, spd);
          }
          document.addEventListener('DOMContentLoaded', type);
        })();
      </script>

######## Main ########
# ✅ [修改] 在下方所有页面的 leftbar 中加入了 sidebar_intro
site_tree:
  home:
    leftbar: sidebar_intro, recent
    rightbar: 
  index_blog:
    base_dir: blog
    menu_id: post
    leftbar: sidebar_intro, recent
    rightbar: 
  post:
    menu_id: post
    leftbar: sidebar_intro, recent
    rightbar: ghrepo, toc
  page:
    leftbar: sidebar_intro, recent
    rightbar: toc
  index_topic:
    base_dir: topic
    menu_id: post
  index_wiki:
    base_dir: wiki
    menu_id: wiki
    leftbar: sidebar_intro, related, recent
    rightbar: 
  wiki:
    menu_id: wiki
    leftbar: tree, sidebar_intro, related, recent
    rightbar: ghrepo, toc
  author: 
    base_dir: author
    menu_id: post
    leftbar: sidebar_intro, recent, timeline
    rightbar: timeline
  error_page:
    menu_id: post
    '404': '/404.html'
    leftbar: sidebar_intro, recent, timeline
    rightbar: timeline

######## Article ########
article:
  type: tech
  cover_ratio: 2
  banner_ratio: 2.5
  auto_banner: false
  auto_excerpt: 128
  category_color:
    '探索号': '#f44336'
  license: '本文采用 [署名-非商业性使用-相同方式共享 4.0 国际](https://creativecommons.org/licenses/by-nc-sa/4.0/) 许可协议，转载请注明出处。'
  related_posts:
    enable: false
    max_count: 5

search:
  service: local_search
  local_search:
    field: all
    path: /search.json
    content: true

######## Comments ########
comments:
  service: twikoo
  comment_title: 快来参与讨论吧~
  lazyload: false
  twikoo:
    js: https://gcore.jsdelivr.net/npm/twikoo@1.6/dist/twikoo.all.min.js
    envId: https://comments.seekblack.cn

######## Footer ########
footer:
  content: | 
    本站由 [{author.name}](/) 使用 [{theme.name} {theme.version}]({theme.tree}) 主题创建。
    本博客所有文章除特别声明外，均采用 [CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/) 许可协议，转载请注明出处。

######## Plugins & Services ########
data_services:
  friends:
    js: /js/services/friends.js
  siteinfo:
    js: /js/services/siteinfo.js
  mdrender:
    js: /js/services/mdrender.js

plugins:
  preload:
    enable: true
    service: flying_pages
    flying_pages: https://gcore.jsdelivr.net/npm/flying-pages@2/flying-pages.min.js
  fancybox:
    enable: true
    js: https://gcore.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.umd.js
    css: https://gcore.jsdelivr.net/npm/@fancyapps/ui@5.0/dist/fancybox/fancybox.css
    selector: .timenode p>img
  swiper:
    enable: true
    css: https://unpkg.com/swiper@10.3/swiper-bundle.min.css
    js: https://unpkg.com/swiper@10.3/swiper-bundle.min.js
  copycode:
    enable: true
    default_text: 'Copy'
    success_text: 'Copied'
    toast: 复制成功

######## Style ########
style:
  prefers_theme: auto
  smooth_scroll: true
  border-radius:
    card-l: 24px
    card: 16px
    card-s: 12px
    bar: 8px
    image-l: 24px
    image: 16px
    image-s: 8px
  color:
    theme: 'hsl(192 98% 55%)'
    accent: 'hsl(14 100% 57%)'
    link: 'hsl(207 90% 54%)'
  animated_avatar:
    animate: auto
    background: https://gcore.jsdelivr.net/gh/cdn-x/placeholder@1.0.12/avatar/round/rainbow64@3x.webp

######## ⬇️ 核心注入代码 (这里改了颜色) ⬇️ ########
inject:
  head:
    # 字体
    - <link rel="stylesheet" href="https://npm.elemecdn.com/lxgw-wenkai-screen-webfont/style.css">
    - <style>:root{--font-family-body:"LXGW WenKai Screen",sans-serif!important;--font-family-headings:"LXGW WenKai Screen",sans-serif!important;}body,h1,h2,h3,h4,h5,h6,.title,.text,.content{font-family:"LXGW WenKai Screen",sans-serif!important;}</style>
    
    # 图标库
    - <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    # 样式定义
    - |
      <style>
      /* 1. 注入菜单的容器样式 */
      .inject-widget { } 
      .inject-header { font-size: 0.875rem; color: var(--text-p3); margin-bottom: 8px; padding-left: 16px; }
      .inject-body { background: transparent !important; border-radius: 8px; padding: 4px; }
      
      /* 2. 注入菜单项基础样式 */
      .inject-item { display: flex; align-items: center; padding: 8px 12px; border-radius: 4px; color: var(--text-p1); text-decoration: none !important; transition: all 0.2s; font-size: 15px; }
      .inject-item:hover { background: var(--block); }
      .inject-icon { width: 24px; text-align: center; margin-right: 8px; color: var(--text-p3); }
      
      /* 3. ✅【全局高亮统一样式】核心修改在这里 */
      /* 无论是注入的菜单(.inject-item) 还是主题自带的Wiki菜单(.widget-wrapper .item) */
      /* 只要是 active 状态，全部变成红色背景+红色文字 */
      .inject-item.active,
      .widget-wrapper .widget-body .item.active,
      .widget-wrapper .widget-body .link.active { 
          background: #fbecec !important; /* 淡红色背景 */
          color: #d9363e !important;      /* 红色文字 */
          font-weight: bold;
      }
      
      /* 4. ✅【全局青色图标】 */
      /* 强制激活状态下的图标变为青色 (如果不想要青色可以删掉这行) */
      .inject-item.active .inject-icon,
      .widget-wrapper .widget-body .item.active .icon,
      .widget-wrapper .widget-body .item.active iconify-icon {
          color: #4ccbf3 !important; 
      }

      /* 5. ✅【全局红色星星】 */
      /* 强制所有激活项后面都加个红色星星 */
      .inject-star,
      .widget-wrapper .widget-body .item.active::after,
      .widget-wrapper .widget-body .link.active::after { 
          content: "★";
          margin-left: auto; 
          color: #d9363e !important; 
          font-size: 12px; 
          display: inline-block;
          order: 99;
      }
      </style>

    # 脚本：侧边栏注入 + 顶部导航逻辑
    - |
      <script>
      document.addEventListener("DOMContentLoaded", function() {
          var path = decodeURI(window.location.pathname);

          // 1. 顶部导航栏高亮逻辑
          if (path.indexOf("/friends/") !== -1 || path.indexOf("/about/") !== -1) {
              var navItems = document.querySelectorAll('.nav-area .menu .nav-item');
              navItems.forEach(function(item) {
                  item.classList.remove('active');
                  var itemHref = item.getAttribute('href');
                  
                  if (itemHref !== '/' && path.startsWith(itemHref)) {
                        item.classList.add('active');
                  }
                  
                  // About 页面点亮爱心
                  if (path.indexOf("/about/") !== -1 && itemHref.indexOf("/friends/") !== -1) {
                        item.classList.add('active');
                  }
              });
          }

          // 2. 侧边栏菜单注入 (仅在友链/关于页)
          if (path.indexOf("/friends/") === -1 && path.indexOf("/about/") === -1) return;
          
          var target = document.querySelector('.leftbar-container .search-wrapper');
          if (!target) target = document.querySelector('.leftbar-container .widget-wrapper.recent');
          
          if (target) {
              var isFriends = path.indexOf("/friends/") !== -1;
              var isAbout = path.indexOf("/about/") !== -1;
              
              var html = `
              <div class="inject-widget">
                  <div class="inject-header">社交</div>
                  <div class="inject-body">
                      <a href="/friends/" class="inject-item ${isFriends ? 'active' : ''}">
                          <i class="fa-solid fa-user-group inject-icon"></i>
                          <span>小伙伴们</span>
                          ${isFriends ? '<i class="fa-solid fa-star inject-star"></i>' : ''}
                      </a>
                      <a href="/about/" class="inject-item ${isAbout ? 'active' : ''}">
                          <i class="fa-solid fa-comment-dots inject-icon"></i>
                          <span>关于本站</span>
                          ${isAbout ? '<i class="fa-solid fa-star inject-star"></i>' : ''}
                      </a>
                  </div>
              </div>`;

              if (target.classList.contains('search-wrapper')) {
                  target.insertAdjacentHTML('afterend', html);
              } else {
                  target.insertAdjacentHTML('beforebegin', html);
              }
          }
          
          // 3. 杂项修正
          if (document.title.startsWith("explore")) document.title = document.title.replace(/^explore[：:]\s?/, "");
          var sInput = document.getElementById("search-input");
          var placeholder = sInput ? (sInput.getAttribute("placeholder") || "") : "";
          if (sInput && placeholder.indexOf("/wiki/explore/") !== -1) {
              sInput.setAttribute("placeholder", "在探索中搜索");
          }
      });
      </script>

# 基础依赖
dependencies:
  jquery: https://gcore.jsdelivr.net/npm/jquery@3.7/dist/jquery.min.js
  marked: https://gcore.jsdelivr.net/npm/marked@13.0/lib/marked.umd.min.js
  lazyload:
    js: https://gcore.jsdelivr.net/npm/vanilla-lazyload@19.1/dist/lazyload.min.js
    transition: fade
    fix_ratio: true

system:
  override_pretty_urls: true